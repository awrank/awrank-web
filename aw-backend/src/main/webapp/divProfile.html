<div class="container">
    <div class="row">
        <div class="span12">
			 
  			<div name="alert-error"></div>
            <div name="alert-warning"></div>
            <form action="#" id="regform" onsubmit="fRegisterSubmit();" class="well"  accept="application/json" enctype="application/json">
                <fieldset>
                    <legend lngt="PROFILE"></legend>
                   
					<div class="input-prepend">
                        <span class="add-on"><i class="icon-user"></i></span>
                        <input type="text" id="firstName" class="span11" lngp="FIRST_NAME" />
                    </div>
                    <div class="input-prepend">
                        <span class="add-on"><i class="icon-user"></i></span>
                        <input type="text" id="lastName" class="span11" lngp="LAST_NAME" />
                    </div>
                    <div class="input-prepend">
                        <span class="add-on"><i class="icon-calendar"></i></span>
                        <input type="text" id="birthdayAsFormattedString" class="span11" lngp="PROFILE_FIELD_BIRTHDAY"/>
                    </div>
                    
                     <div class="input-prepend">
                        <span class="add-on"><i class="icon-heart"></i></span>
                        <input type="language" id="language" class="span11" lngp="REGISTER_FIELD_LANGUAGE" />
                    </div>
                    <br>
                    <label lngt="WE_RECOMMEND_SECRET_QUESTION"></label>

                    <div class="row-fluid">
                        <div class="span6">
                            <select class="input-block-level" id="dicSelector">
                                <option lngt=SECRET_QUESTION_FIRST_PET value="SECRET_QUESTION_FIRST_PET"></option>
                                <option lngt="SECRET_QUESTION_MOTHERS_MAIDEN_NAME" value="SECRET_QUESTION_MOTHERS_MAIDEN_NAME"></option>
                                <option lngt="SECRET_QUESTION_FAVOURITE_DISH" value="SECRET_QUESTION_FAVOURITE_DISH"></option>
                                <option lngt="SECRET_QUESTION_UNFORGETTABLE_EVENT" value="SECRET_QUESTION_UNFORGETTABLE_EVENT"></option>
                            </select>
                        </div>
                        <div class="span6">
                            <input type="text" class="input-block-level" lngp="INPUT_ANSWER_HERE" id="dicAnswer"/>
                        </div>
                    </div>
                    <div class="row-fluid">
                        
                        <div class="span12">
                            <button class="btn btn-large btn-primary pull-right"
                                    type="submit"
                                    lngt="UPDATE"></button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
        <div id="user_details">details:</div>

    </div>
    
    <script type="text/template" id="user-details">
<label>First Name:</label>
<input type="text" id="firstName" name="firstName" value="<%= firstName %>"/>
<label>Last Name:</label>
<input type="text" id="lastName" name="lastName" value="<%= lastName %>"/>
 </script>
 
    <script type="text/javascript" language="JavaScript">

    //alert("outside");
    
		window.User = Backbone.Model.extend({
			url: 'rest/profile/userdata/get2/'
		});
		
		window.UserView = Backbone.View.extend({
		    el : $('#user_details'),
		    template : _.template($('#user-details').html()),
		    initialize : function() {
		        this.render();
		    },
		    render : function(eventName) {
		        $(this.el).html(this.template(this.model.toJSON()));
		        return this;
		    }
		});
		
		var me = new User({
			firstName: "Test First Name",
			"lastName": "Test Last Name"
		});
		var meView = new UserView({
		    model : me
		});
		
		me.fetch({success: function (data) {
			
			alert(data.result + "  vs "+data.result.toString());
			if(data.result.toString() == "failure"){
				
				alertError(getMessage('ERROR'), getMessage(data.reason.toString()));
				return false;
			}
			else{
			
				me.firstName = data.firstName.toString();
				alert(JSON.stringify(data));
				me.render(data);
			}
			
		}});
    
	</script>
</div>